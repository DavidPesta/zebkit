<!DOCTYPE html>
<html lang="en-us">

  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <meta name="viewport"
       content="user-scalable=no,width=device-width,initial-scale=1,maximum-scale=1">
    <meta name="msapplication-tap-highlight" content="no">


    <title>
        
          Zson &middot; Zebkit - UI platform
        
    </title>

  <!-- CSS -->


    <link rel="stylesheet" href="/website/light/public/css/poole-light.css">
    <link rel="stylesheet" href="/website/light/public/css/syntax-light.css">
    <link rel="stylesheet" href="/website/light/public/css/main-light.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=EB+Garamond">
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/website/light/public/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/website/light/public/favicon.ico">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

    <script type="text/javascript" src="/build/zebkit.js">  </script>

    <script type="text/javascript">
        zebkit.ui.config("theme", "light");
    </script>
</head>



  <body>

    <div class="sidebar" style="padding: 0px;   border-right: 1px solid orange" >
    <div class="container sidebar-sticky" style="padding: 0px; margin: 0px;">
        <table style="height:100%;border-width: 0px; border-color: #151515;">
            <tr>
                <td colspan="2" align="center" style="border-width: 0px; margin: 0px; padding: 0px;">
                    <a href="../index.html">
                        <img style="margin: 0px; padding: 0px;" src="/website/light/public/images/zebkit.logo.png" width="60%">
                    </a>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="border-width: 0px;">
                    <p style="margin:0px; font-style: italic;"><b style='color:orange; font-size:1.5rem;'>Zebkit</b> is HTML5 Canvas based UI platform developed with unique EasyOOP JavaScript concept and rich extendible components set</p>
                </td>
            </tr>

            <tr style="height:100%;" valign="top" align="right">
                <td colspan="2" style="border-width: 0px;">
                    
                    
                        
                        
                        
                    
                        
                        

                            
                            


                            <a class="sidebar-nav-item "
                               href="/website/light/about.html">
                                Zebkit ?
                            </a>


                        
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                        
                        


                        
                        
                    
                        
                        

                            
                            


                            <a class="sidebar-nav-item "
                               href="/website/light/api.html">
                                API Doc
                            </a>


                        


                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        

                            
                            


                            <a class="sidebar-nav-item active"
                               href="/website/light/docs.html">
                                Documentation
                            </a>


                        
                        
                            
                        
                            
                        
                            
                        
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                                <!--


                                -->
                            
                        
                            
                        
                            
                        
                        


                        
                        
                    
                        
                    
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        
                        
                    
                        
                        

                            
                            


                            <a class="sidebar-nav-item "
                               href="/website/light/getstarted.html">
                                Get started
                            </a>


                        


                        
                        
                    
                </td>
            </tr>

            <tr style="height:90px;">
                <td colspan="2"  style="border-width: 0px;padding: 0px;"></td>
            </tr>

            <tr>
                <td align="right" colspan="2" style="border-width: 0px; border-top: 1px solid orange;">
                    <small><a href="mailto:ask@zebkit.org">Andrei Vishneuski (c), 2017</a></small>
                </td>
            </tr>

            <tr>
                <td colspan="2" valign="top" align="right" style="border-width: 0px;padding: 0px;">
                    <table style="width:240px;border-width: 0px; padding: 0px;" cellpadding="0" cellspacing="0">
                        <tr style="padding: 0px;" border="1">
                            <td style="width:60px;border-width: 0px;" align="right">
                                <a href="https://github.com/barmalei/zebkit" title="Download">
                                    <img alt="Download" title="Download" src="/website/light/public/images/github3.png" width="40px" height="40px">
                                </a>
                            </td>
                            <td style="width:60px; border-width: 0px;" align="right">
                                <a href="https://twitter.com/zebkit">
                                    <img src="/website/light/public/images/twitter.png" width="40px" height="40px">
                                </a>
                            </td>
                            <td style="width:60px; border-width: 0px;" align="right">
                                <a href="https://nl.linkedin.com/in/andrei-vishneuski-34b52514">
                                    <img src="/website/light/public/images/linkedin.png" width="40px" height="40px">
                                </a>
                            </td>

                            <td style="width: 70px; border-width: 0px; " valign="center" align="right">
                                <a href="../build/zebkit.runtime.zip">
                                    <img src="/website/light/public/images/download-light.png" width="40px" height="40px">
                                </a>
                            </td>

                        </tr>
                    </table>
                </td>

            </tr>

        </table>

    <nav class="sidebar-nav">

<!--
      <a class="sidebar-nav-item" href="/website/light/">Home</a>
 -->

    </nav>

  </div>
</div>

    <div class="content container">
      <div class="page">

    
        <h1 class="page-title">Zson</h1>
    

    <h3 id="zson-features">Zson features</h3>

<p>JSON is for ages becoming is widely used format to keep configuration, exchange and store data etc. Zebkit uses JSON:</p>

<ul>
  <li>To configure UI components properties</li>
  <li>As a descriptive language to define UI forms</li>
</ul>

<p>Pure JSON is too basic and limited. Zebkit extends JSON interpretation to support number of advanced features. The new JSON interpretation is called Zson. Zson supports the following:</p>

<ul>
  <li><strong>Class instantiation.</strong> A JSON field value can be described as an instance of a class. For instance, “a” field in the JSON below will be set to an instance of JS “RegExp” (a = new RegExp(“[a-z]+”,”i”)) class:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"a"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"@RegExp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"[a-z]+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"i"</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li><strong>Properties.</strong> Loading a JS object with a JSON takes in account the target object can have setter methods for a dedicated properties. For the following JSON zebkit tries to call <strong>“setTest(100)”</strong> method of the target object if the method is available:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">"test"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li><strong>References.</strong> A value can be set as reference to other JSON value. For instance “b” field value is set to 12:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">    </span><span class="p">{</span><span class="w">  </span><span class="nt">"a"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="nt">"b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"%{a}"</span><span class="w"> </span><span class="p">}</span><span class="w"> 
</span></code></pre>
</div>

<ul>
  <li><strong>Expressions.</strong> Expression is JS code that is evaluated and then assigned to a JSON field as a value. For instance the value of “a” field below will be resolved as JS expression and set to 20:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">    </span><span class="p">{</span><span class="w">  </span><span class="nt">"a"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">".expr"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"10 + 10"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li><strong>Image, textual file and embedded JSON loadings.</strong>  JSON values can be references to external resources like images, JSON, etc. For instance to load image and set it as “a” field value the following JSON can be used:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="w">    </span><span class="p">{</span><span class="w">  </span><span class="nt">"a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"%{&lt;img&gt; http://test.com/picture.jpg}"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Pay attention that external files are loaded asynchronously. You can load multiple external files recursively. Zebkit keeps the loadings in order. That means any subsequent field value can be a reference to a an externally loaded field. For instance:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  </span><span class="nt">"a"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
   </span><span class="nt">"b"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"c"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"@Date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> 
   </span><span class="nt">"d"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"%{a}"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"e"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"%{&lt;json&gt; http://test.com/embedded.json}"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"f"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"%{e.m.k}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Where “embedded.json” is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  </span><span class="nt">"m"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="nt">"k"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li><strong>“a”</strong> equals 100</li>
  <li><strong>“c”</strong> is an instance of JS “Date” class</li>
  <li><strong>“d”</strong> is reference that will be resolved to value “a” key has (100)</li>
  <li><strong>“e”</strong> value will be loaded and set to data “http://test.com/data.txt” URL points</li>
  <li><strong>“f”</strong> value is a reference to JSON content that is loaded as external JSON. In this case “f” equals “Hello”.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">new</span> <span class="nx">Zson</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="s2">"config.json"</span><span class="p">,</span> <span class="nx">conf</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span> <span class="c1">// handle fully loaded json</span>
<span class="p">});</span>  
</code></pre>
</div>

<h3 id="configure-js-objects-with-zson">Configure JS objects with Zson</h3>

<p>Zson can be used to configure classes and class instances with required properties. The way to do it looks as follow:</p>

<ul>
  <li>Imagine we declare simple class:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">zebkit</span><span class="p">.</span><span class="nx">Class</span><span class="p">([</span>
    <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// constructor</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="kd">function</span> <span class="nx">setD</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// setter of property "d" </span>
        <span class="k">this</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">]);</span> 
</code></pre>
</div>

<ul>
  <li>Then we declare JSON  (“config.json”) to configure the class instance:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">  
    </span><span class="nt">"d"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"value of property 'd'"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"c"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"@Date"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nt">"c"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li>And at last instantiate the class and configure the instance with JSON:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A</span><span class="p">();</span>
<span class="c1">// configure instance of class "A" with JSON</span>
<span class="nx">zebkit</span><span class="p">.</span><span class="nx">Zson</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="s2">"config.json"</span><span class="p">,</span> <span class="nx">a</span><span class="p">);</span>  
</code></pre>
</div>

</div>

    </div>


  </body>
</html>
